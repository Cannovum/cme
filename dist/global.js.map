{"version":3,"sources":["loginModal.js","global.js"],"names":["createLoginModal","sessionRedirect","modalWrapper","document","createElement","classList","add","Math","random","toString","substring","overlay","modal","body","innerHTML","closeButton","dataset","modalCloseButton","append","addEventListener","closeModal","console","error","remove","sessionStorage","removeItem","setTimeout","openModal","MemberStack","onReady","then","member","redirectUser","loggedIn","loginRedirect","getItem","log","window","location","assign","loginButton","hide","lougoutButton","$","addHrefToLoginButton","attr","e","checkLoginClick","target","matches","parentNode","redirectLink","getAttribute","href","origin","setItem","checkLogoutClick","logout"],"mappings":";AAoDC,aApDc,SAASA,IAAiBC,IAAAA,EAAkB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KACpDC,EAAeC,SAASC,cAAc,OAC5CF,EAAaG,UAAUC,IACtB,kBAAoBC,KAAKC,SAAW,GAAGC,SAAS,IAAIC,UAAU,IAGzDC,IAAAA,EAAUR,SAASC,cAAc,OACvCO,EAAQN,UAAUC,IAAI,iBAEhBM,IAAAA,EAAQT,SAASC,cAAc,OACrCQ,EAAMP,UAAUC,IAAI,SACdO,IAAAA,EAAOV,SAASC,cAAc,OACpCS,EAAKR,UAAUC,IAAI,cACnBO,EAAKC,UAAL,qSAEMC,IAAAA,EAAcZ,SAASC,cAAc,OAapCF,OAZPa,EAAYV,UAAUC,IAAI,sBAC1BS,EAAYC,QAAQC,kBAAmB,EACvCF,EAAYD,UAAZ,4NAGAZ,EAAagB,OAAON,EAAOD,GAC3BC,EAAMM,OAAOH,EAAaF,GAE1BF,EAAQQ,iBAAiB,QAAS,WAAMC,OAAAA,MACxCL,EAAYI,iBAAiB,QAAS,WAAMC,OAAAA,MAGrClB,EAGEkB,SAAAA,IACJR,GAAS,MAATA,EAGH,OAFAS,QAAQC,MAAM,0BACdD,QAAQC,MAAMV,GAGfA,EAAMP,UAAUkB,OAAO,UACvBZ,EAAQN,UAAUkB,OAAO,UACrBtB,GAAiBuB,eAAeC,WAAWxB,GAC/CyB,WAAW,WAAMxB,OAAAA,EAAaqB,UAAU,MAI1C,SAASI,IACJf,GAAS,MAATA,MAGH,OAFAS,QAAQC,MAAM,yBACdD,QAAQC,MAAMV,OAGfA,MAAMP,UAAUC,IAAI,UACpBK,QAAQN,UAAUC,IAAI,UACtB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;AClDD,aAFA,IAAA,EAAA,EAAA,QAAA,iBAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAAsB,YAAYC,QAAQC,KAAK,SAACC,IAqDhBC,WACJ,IAACD,EAAOE,SAAU,OAChBC,IAAAA,EAAgBV,eAAeW,QAAQlC,GACzCiC,GAAmC,SAAlBA,IACpBb,QAAQe,IAAI,iBACZZ,eAAeC,WAAWxB,GAC1BoC,OAAOC,SAASC,OAAOL,IAzDzBF,GA8DKD,EAAOE,SAAUO,EAAYC,OAC5BC,EAAcD,OA5DdD,IAAAA,EAAcG,EAAE,iBAChBD,EAAgBC,EAAE,oBAClB1C,EAAkB,kBA6Df2C,WACJ,IAACJ,EAAYK,KAAK,QAAS,OAC/BL,EAAYK,KAAK,OAAQL,EAAYK,KAAK,wBA7D3CD,GAGAzC,SAASU,KAAKM,iBAAiB,QAAS,SAAC2B,IAI/BC,WAEP,IAACD,EAAEE,OAAOC,QAAQ,qBACjBH,EAAEE,OAAOE,WAAWD,QAAQ,mBAE7B,OAGGE,IAAAA,EAAeL,EAAEE,OAAOI,aAAa,uBACrCD,GAAAA,EAAc,CACTA,OAAAA,GACF,IAAA,OACJA,EAAed,OAAOC,SAASe,KAC/B,MAEI,IAAA,OACJF,EAAed,OAAOC,SAASgB,OAIjC9B,eAAe+B,QAAQtD,EAAiBkD,GAGzChD,SAASU,KAAKK,QAAO,EAAiBjB,EAAAA,SAAAA,IA1BvC8C,GA6BSS,WAEP,IAACV,EAAEE,OAAOC,QAAQ,sBACjBH,EAAEE,OAAOE,WAAWD,QAAQ,oBAE7B,OAEDrB,YAAY6B,SAnCbD","file":"global.js","sourceRoot":"../src","sourcesContent":["export default function createLoginModal(sessionRedirect = null) {\n\tconst modalWrapper = document.createElement(\"div\")\n\tmodalWrapper.classList.add(\n\t\t\"modal_wrapper-\" + (Math.random() + 1).toString(36).substring(2)\n\t)\n\n\tconst overlay = document.createElement(\"div\")\n\toverlay.classList.add(\"modal-overlay\")\n\n\tconst modal = document.createElement(\"div\")\n\tmodal.classList.add(\"modal\")\n\tconst body = document.createElement(\"div\")\n\tbody.classList.add(\"modal-body\")\n\tbody.innerHTML = `<iframe align=\"left\" frameborder=\"0\" scrolling=\"no\" width=\"467\" height=\"231\" name=\"dc_login_iframe\" id=\"dc_login_iframe\" src=\"https://login.doccheck.com/code/de/2000000016834/login_xl/\" ><a href=\"https://login.doccheck.com/code/de/2000000016834/login_xl/\" target=\"_blank\">LOGIN</a></iframe>`\n\n\tconst closeButton = document.createElement(\"div\")\n\tcloseButton.classList.add(\"modal-close-button\")\n\tcloseButton.dataset.modalCloseButton = true\n\tcloseButton.innerHTML = `<div class=\"txt_white mr12 text-small\">Schlie√üen</div>\n  <img src=\"https://uploads-ssl.webflow.com/60c715a8f0171b333d99d01c/60c715a8f0171b0df599d0c8_ic_round-close%20-white.svg\" loading=\"lazy\" alt=\"\" class=\"w18 h18\">`\n\n\tmodalWrapper.append(modal, overlay)\n\tmodal.append(closeButton, body)\n\n\toverlay.addEventListener(\"click\", () => closeModal())\n\tcloseButton.addEventListener(\"click\", () => closeModal())\n\n\t// * Return\n\treturn modalWrapper //the modal\n\n\t// * Functions\n\tfunction closeModal() {\n\t\tif (modal == null) {\n\t\t\tconsole.error(\"Modal close error\")\n\t\t\tconsole.error(modal)\n\t\t\treturn\n\t\t}\n\t\tmodal.classList.remove(\"active\")\n\t\toverlay.classList.remove(\"active\")\n\t\tif (sessionRedirect) sessionStorage.removeItem(sessionRedirect)\n\t\tsetTimeout(() => modalWrapper.remove(), 125)\n\t}\n}\n\nfunction openModal() {\n\tif (modal == null) {\n\t\tconsole.error(\"Modal open error\")\n\t\tconsole.error(modal)\n\t\treturn\n\t}\n\tmodal.classList.add(\"active\")\n\toverlay.classList.add(\"active\")\n}\n","import createLoginModal from \"./loginModal\"\n\nMemberStack.onReady.then((member) => {\n\t// * MS stuff\n\tredirectUser()\n\thideAuthButton()\n\n\tconst loginButton = $(\".dc_login-btn\")\n\tconst lougoutButton = $(\"[data-dc-logout]\")\n\tconst sessionRedirect = \"login-redirect\"\n\n\taddHrefToLoginButton()\n\n\t// ? Global click listener for login / logout buttons\n\tdocument.body.addEventListener(\"click\", (e) => {\n\t\tcheckLoginClick()\n\t\tcheckLogoutClick()\n\n\t\tfunction checkLoginClick() {\n\t\t\tif (\n\t\t\t\t!e.target.matches(\"[data-dc-login]\") ||\n\t\t\t\t!e.target.parentNode.matches(\"[data-dc-login]\")\n\t\t\t) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet redirectLink = e.target.getAttribute(\"data-login-redirect\")\n\t\t\tif (redirectLink) {\n\t\t\t\tswitch (redirectLink) {\n\t\t\t\t\tcase \"stay\":\n\t\t\t\t\t\tredirectLink = window.location.href\n\t\t\t\t\t\tbreak\n\n\t\t\t\t\tcase \"home\":\n\t\t\t\t\t\tredirectLink = window.location.origin\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tsessionStorage.setItem(sessionRedirect, redirectLink)\n\t\t\t}\n\n\t\t\tdocument.body.append(createLoginModal(sessionRedirect))\n\t\t}\n\n\t\tfunction checkLogoutClick() {\n\t\t\tif (\n\t\t\t\t!e.target.matches(\"[data-dc-logout]\") ||\n\t\t\t\t!e.target.parentNode.matches(\"[data-dc-logout]\")\n\t\t\t) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tMemberStack.logout()\n\t\t}\n\t})\n\n\tfunction redirectUser() {\n\t\tif (!member.loggedIn) return\n\t\tconst loginRedirect = sessionStorage.getItem(sessionRedirect)\n\t\tif (loginRedirect && loginRedirect !== \"dont\") {\n\t\t\tconsole.log(\"redirect user\")\n\t\t\tsessionStorage.removeItem(sessionRedirect)\n\t\t\twindow.location.assign(loginRedirect) // Redirect user\n\t\t}\n\t}\n\n\tfunction hideAuthButton() {\n\t\tif (member.loggedIn) loginButton.hide()\n\t\telse lougoutButton.hide()\n\t}\n\n\tfunction addHrefToLoginButton() {\n\t\tif (!loginButton.attr(\"href\")) return\n\t\tloginButton.attr(\"href\", loginButton.attr(\"data-login-redirect\"))\n\t}\n})\n"]}