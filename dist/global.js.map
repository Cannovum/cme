{"version":3,"sources":["loginModal.js","global.js"],"names":["createLoginModal","sessionRedirect","modalWrapper","document","createElement","classList","add","Math","random","toString","substring","overlay","modal","body","innerHTML","closeButton","dataset","modalCloseButton","append","addEventListener","closeModal","console","error","remove","sessionStorage","removeItem","setTimeout","openModal","MemberStack","onReady","then","member","redirectUser","loggedIn","loginRedirect","getItem","log","window","location","assign","loginButton","hide","lougoutButton","$","addHrefToLoginButton","attr","e","checkLoginClick","target","matches","parentNode","redirectLink","getAttribute","href","origin","setItem","checkLogoutClick","logout"],"mappings":";AAoDC,aApDc,SAASA,IAAiBC,IAAAA,EAAkB,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KACpDC,EAAeC,SAASC,cAAc,OAC5CF,EAAaG,UAAUC,IACtB,kBAAoBC,KAAKC,SAAW,GAAGC,SAAS,IAAIC,UAAU,IAGzDC,IAAAA,EAAUR,SAASC,cAAc,OACvCO,EAAQN,UAAUC,IAAI,iBAEhBM,IAAAA,EAAQT,SAASC,cAAc,OACrCQ,EAAMP,UAAUC,IAAI,SACdO,IAAAA,EAAOV,SAASC,cAAc,OACpCS,EAAKR,UAAUC,IAAI,cACnBO,EAAKC,UAAL,qSAEMC,IAAAA,EAAcZ,SAASC,cAAc,OAapCF,OAZPa,EAAYV,UAAUC,IAAI,sBAC1BS,EAAYC,QAAQC,kBAAmB,EACvCF,EAAYD,UAAZ,4NAGAZ,EAAagB,OAAON,EAAOD,GAC3BC,EAAMM,OAAOH,EAAaF,GAE1BF,EAAQQ,iBAAiB,QAAS,WAAMC,OAAAA,MACxCL,EAAYI,iBAAiB,QAAS,WAAMC,OAAAA,MAGrClB,EAGEkB,SAAAA,IACJR,GAAS,MAATA,EAGH,OAFAS,QAAQC,MAAM,0BACdD,QAAQC,MAAMV,GAGfA,EAAMP,UAAUkB,OAAO,UACvBZ,EAAQN,UAAUkB,OAAO,UACrBtB,GAAiBuB,eAAeC,WAAWxB,GAC/CyB,WAAW,WAAMxB,OAAAA,EAAaqB,UAAU,MAI1C,SAASI,IACJf,GAAS,MAATA,MAGH,OAFAS,QAAQC,MAAM,yBACdD,QAAQC,MAAMV,OAGfA,MAAMP,UAAUC,IAAI,UACpBK,QAAQN,UAAUC,IAAI,UACtB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;AClDD,aAFA,IAAA,EAAA,EAAA,QAAA,iBAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAAsB,YAAYC,QAAQC,KAAK,SAACC,IAqDhBC,WACJ,IAACD,EAAOE,SAAU,OAChBC,IAAAA,EAAgBV,eAAeW,QAAQlC,GACzCiC,GAAmC,SAAlBA,IACpBb,QAAQe,IAAI,iBACZZ,eAAeC,WAAWxB,GAC1BoC,OAAOC,SAASC,OAAOL,IAzDzBF,GA8DKD,EAAOE,SAAUO,EAAYC,OAC5BC,EAAcD,OA5DdD,IAAAA,EAAcG,EAAE,iBAChBD,EAAgBC,EAAE,oBAClB1C,EAAkB,kBA6Df2C,WACJ,IAACJ,EAAYK,KAAK,QAAS,OAC/BL,EAAYK,KAAK,OAAQL,EAAYK,KAAK,wBA7D3CD,GAGAzC,SAASU,KAAKM,iBAAiB,QAAS,SAAC2B,IAI/BC,WAEP,IAACD,EAAEE,OAAOC,QAAQ,qBACjBH,EAAEE,OAAOE,WAAWD,QAAQ,mBAE7B,OAGGE,IAAAA,EAAeL,EAAEE,OAAOI,aAAa,uBACrCD,GAAAA,EAAc,CACTA,OAAAA,GACF,IAAA,OACJA,EAAed,OAAOC,SAASe,KAC/B,MAEI,IAAA,OACJF,EAAed,OAAOC,SAASgB,OAIjC9B,eAAe+B,QAAQtD,EAAiBkD,GAGzChD,SAASU,KAAKK,QAAO,EAAiBjB,EAAAA,SAAAA,IA1BvC8C,GA6BSS,WAEP,IAACV,EAAEE,OAAOC,QAAQ,sBACjBH,EAAEE,OAAOE,WAAWD,QAAQ,oBAE7B,OAEDrB,YAAY6B,SAnCbD","file":"global.js","sourceRoot":"..\\src","sourcesContent":["export default function createLoginModal(sessionRedirect = null) {\r\n\tconst modalWrapper = document.createElement(\"div\")\r\n\tmodalWrapper.classList.add(\r\n\t\t\"modal_wrapper-\" + (Math.random() + 1).toString(36).substring(2)\r\n\t)\r\n\r\n\tconst overlay = document.createElement(\"div\")\r\n\toverlay.classList.add(\"modal-overlay\")\r\n\r\n\tconst modal = document.createElement(\"div\")\r\n\tmodal.classList.add(\"modal\")\r\n\tconst body = document.createElement(\"div\")\r\n\tbody.classList.add(\"modal-body\")\r\n\tbody.innerHTML = `<iframe align=\"left\" frameborder=\"0\" scrolling=\"no\" width=\"467\" height=\"231\" name=\"dc_login_iframe\" id=\"dc_login_iframe\" src=\"https://login.doccheck.com/code/de/2000000016834/login_xl/\" ><a href=\"https://login.doccheck.com/code/de/2000000016834/login_xl/\" target=\"_blank\">LOGIN</a></iframe>`\r\n\r\n\tconst closeButton = document.createElement(\"div\")\r\n\tcloseButton.classList.add(\"modal-close-button\")\r\n\tcloseButton.dataset.modalCloseButton = true\r\n\tcloseButton.innerHTML = `<div class=\"txt_white mr12 text-small\">Schlie√üen</div>\r\n  <img src=\"https://uploads-ssl.webflow.com/60c715a8f0171b333d99d01c/60c715a8f0171b0df599d0c8_ic_round-close%20-white.svg\" loading=\"lazy\" alt=\"\" class=\"w18 h18\">`\r\n\r\n\tmodalWrapper.append(modal, overlay)\r\n\tmodal.append(closeButton, body)\r\n\r\n\toverlay.addEventListener(\"click\", () => closeModal())\r\n\tcloseButton.addEventListener(\"click\", () => closeModal())\r\n\r\n\t// * Return\r\n\treturn modalWrapper //the modal\r\n\r\n\t// * Functions\r\n\tfunction closeModal() {\r\n\t\tif (modal == null) {\r\n\t\t\tconsole.error(\"Modal close error\")\r\n\t\t\tconsole.error(modal)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tmodal.classList.remove(\"active\")\r\n\t\toverlay.classList.remove(\"active\")\r\n\t\tif (sessionRedirect) sessionStorage.removeItem(sessionRedirect)\r\n\t\tsetTimeout(() => modalWrapper.remove(), 125)\r\n\t}\r\n}\r\n\r\nfunction openModal() {\r\n\tif (modal == null) {\r\n\t\tconsole.error(\"Modal open error\")\r\n\t\tconsole.error(modal)\r\n\t\treturn\r\n\t}\r\n\tmodal.classList.add(\"active\")\r\n\toverlay.classList.add(\"active\")\r\n}\r\n","import createLoginModal from \"./loginModal\"\r\n\r\nMemberStack.onReady.then((member) => {\r\n\t// * MS stuff\r\n\tredirectUser()\r\n\thideAuthButton()\r\n\r\n\tconst loginButton = $(\".dc_login-btn\")\r\n\tconst lougoutButton = $(\"[data-dc-logout]\")\r\n\tconst sessionRedirect = \"login-redirect\"\r\n\r\n\taddHrefToLoginButton()\r\n\r\n\t// ? Global click listener for login / logout buttons\r\n\tdocument.body.addEventListener(\"click\", (e) => {\r\n\t\tcheckLoginClick()\r\n\t\tcheckLogoutClick()\r\n\r\n\t\tfunction checkLoginClick() {\r\n\t\t\tif (\r\n\t\t\t\t!e.target.matches(\"[data-dc-login]\") ||\r\n\t\t\t\t!e.target.parentNode.matches(\"[data-dc-login]\")\r\n\t\t\t) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tlet redirectLink = e.target.getAttribute(\"data-login-redirect\")\r\n\t\t\tif (redirectLink) {\r\n\t\t\t\tswitch (redirectLink) {\r\n\t\t\t\t\tcase \"stay\":\r\n\t\t\t\t\t\tredirectLink = window.location.href\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase \"home\":\r\n\t\t\t\t\t\tredirectLink = window.location.origin\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsessionStorage.setItem(sessionRedirect, redirectLink)\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.append(createLoginModal(sessionRedirect))\r\n\t\t}\r\n\r\n\t\tfunction checkLogoutClick() {\r\n\t\t\tif (\r\n\t\t\t\t!e.target.matches(\"[data-dc-logout]\") ||\r\n\t\t\t\t!e.target.parentNode.matches(\"[data-dc-logout]\")\r\n\t\t\t) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tMemberStack.logout()\r\n\t\t}\r\n\t})\r\n\r\n\tfunction redirectUser() {\r\n\t\tif (!member.loggedIn) return\r\n\t\tconst loginRedirect = sessionStorage.getItem(sessionRedirect)\r\n\t\tif (loginRedirect && loginRedirect !== \"dont\") {\r\n\t\t\tconsole.log(\"redirect user\")\r\n\t\t\tsessionStorage.removeItem(sessionRedirect)\r\n\t\t\twindow.location.assign(loginRedirect) // Redirect user\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideAuthButton() {\r\n\t\tif (member.loggedIn) loginButton.hide()\r\n\t\telse lougoutButton.hide()\r\n\t}\r\n\r\n\tfunction addHrefToLoginButton() {\r\n\t\tif (!loginButton.attr(\"href\")) return\r\n\t\tloginButton.attr(\"href\", loginButton.attr(\"data-login-redirect\"))\r\n\t}\r\n})\r\n"]}